--
-- PostgreSQL database dump
--

-- Dumped from database version 10.3
-- Dumped by pg_dump version 10.3

-- Started on 2018-04-20 15:07:49

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2817 (class 1262 OID 16500)
-- Name: Item; Type: DATABASE; Schema: -; Owner: postgres
--

CREATE DATABASE "Item" WITH TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'English_United Kingdom.1252' LC_CTYPE = 'English_United Kingdom.1252';


ALTER DATABASE "Item" OWNER TO postgres;

\connect "Item"

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 1 (class 3079 OID 12924)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2819 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 213 (class 1255 OID 16535)
-- Name: get_user(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_user(OUT id integer, OUT name character varying, OUT linkedstring character varying, bikeid integer) RETURNS record
    LANGUAGE sql
    AS $$
 SELECT
   u.id, u.bikename, ot.suppliername
 FROM bikes u
 INNER JOIN suppliers ot ON ot.id = u.supplierid
 WHERE u.id = bikeid
$$;


ALTER FUNCTION public.get_user(OUT id integer, OUT name character varying, OUT linkedstring character varying, bikeid integer) OWNER TO postgres;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 199 (class 1259 OID 16511)
-- Name: bikes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bikes (
    id integer NOT NULL,
    bikename character varying(50) NOT NULL,
    price double precision NOT NULL,
    biketype character varying(50),
    supplierid integer
);


ALTER TABLE public.bikes OWNER TO postgres;

--
-- TOC entry 210 (class 1255 OID 16522)
-- Name: getbike(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.getbike(bikeid integer) RETURNS public.bikes
    LANGUAGE sql
    AS $$  
  SELECT *
  FROM Bikes
  WHERE id = bikeId
$$;


ALTER FUNCTION public.getbike(bikeid integer) OWNER TO postgres;

--
-- TOC entry 205 (class 1255 OID 16538)
-- Name: getbikebyid(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.getbikebyid(OUT bikename character varying, OUT price double precision, OUT biketype character varying, OUT suppliername character varying, bikeid integer) RETURNS record
    LANGUAGE sql
    AS $$
 SELECT
   b.bikename, b.price, b.biketype, s.suppliername
 FROM bikes b
 INNER JOIN suppliers s ON s.id = b.supplierid
 WHERE b.id = bikeid
$$;


ALTER FUNCTION public.getbikebyid(OUT bikename character varying, OUT price double precision, OUT biketype character varying, OUT suppliername character varying, bikeid integer) OWNER TO postgres;

--
-- TOC entry 201 (class 1255 OID 16526)
-- Name: myfunc(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.myfunc() RETURNS SETOF public.bikes
    LANGUAGE sql
    AS $$
SELECT * FROM bikes;
$$;


ALTER FUNCTION public.myfunc() OWNER TO postgres;

--
-- TOC entry 198 (class 1259 OID 16509)
-- Name: bikes_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.bikes_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.bikes_id_seq OWNER TO postgres;

--
-- TOC entry 2820 (class 0 OID 0)
-- Dependencies: 198
-- Name: bikes_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.bikes_id_seq OWNED BY public.bikes.id;


--
-- TOC entry 197 (class 1259 OID 16503)
-- Name: suppliers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.suppliers (
    id integer NOT NULL,
    suppliername character varying(50)
);


ALTER TABLE public.suppliers OWNER TO postgres;

--
-- TOC entry 196 (class 1259 OID 16501)
-- Name: supplier_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.supplier_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.supplier_id_seq OWNER TO postgres;

--
-- TOC entry 2821 (class 0 OID 0)
-- Dependencies: 196
-- Name: supplier_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.supplier_id_seq OWNED BY public.suppliers.id;


--
-- TOC entry 2681 (class 2604 OID 16514)
-- Name: bikes id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bikes ALTER COLUMN id SET DEFAULT nextval('public.bikes_id_seq'::regclass);


--
-- TOC entry 2680 (class 2604 OID 16506)
-- Name: suppliers id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.suppliers ALTER COLUMN id SET DEFAULT nextval('public.supplier_id_seq'::regclass);


--
-- TOC entry 2811 (class 0 OID 16511)
-- Dependencies: 199
-- Data for Name: bikes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.bikes (id, bikename, price, biketype, supplierid) FROM stdin;
1	SuperBike	45.780000000000001	City	1
\.


--
-- TOC entry 2809 (class 0 OID 16503)
-- Dependencies: 197
-- Data for Name: suppliers; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.suppliers (id, suppliername) FROM stdin;
1	SuperSupplier
\.


--
-- TOC entry 2822 (class 0 OID 0)
-- Dependencies: 198
-- Name: bikes_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.bikes_id_seq', 2, true);


--
-- TOC entry 2823 (class 0 OID 0)
-- Dependencies: 196
-- Name: supplier_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.supplier_id_seq', 1, true);


--
-- TOC entry 2685 (class 2606 OID 16516)
-- Name: bikes bikes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bikes
    ADD CONSTRAINT bikes_pkey PRIMARY KEY (id);


--
-- TOC entry 2683 (class 2606 OID 16508)
-- Name: suppliers supplier_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.suppliers
    ADD CONSTRAINT supplier_pkey PRIMARY KEY (id);


--
-- TOC entry 2686 (class 2606 OID 16517)
-- Name: bikes bikes_supplierid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bikes
    ADD CONSTRAINT bikes_supplierid_fkey FOREIGN KEY (supplierid) REFERENCES public.suppliers(id);


-- Completed on 2018-04-20 15:07:50

--
-- PostgreSQL database dump complete
--

